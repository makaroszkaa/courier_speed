Название проекта: Прогнозирование скорости курьера по параметрам маршрута

Задача проекта состоит в том, чтобы понять, можно ли предсказать с какой ско -
ростью курьер будет доходить до места доставки с учетом маршрута, погодных усло -
вий и пройденного расстояния. 

I. На первом этапе работы был написан код по объединению GPS маршрутов в один
DataFrame для того, чтобы понять есть ли корреляция между случайными объектами
нашего исследования. В качестве зависимой перменной выступает скорость курьера. 
Факторами являются: измение высот, температура воздуха, час поездки, широта,
долгота, определение, расстояния для каждого маршурта (id) при помощи формулы 
Гаверсина.

После объединения данных в один DataFrame проведены преобразования стоблцов:
- разделение стобцов даты и время;
- удаление ненужных столбцов;
- индексация столбцов;
- смена названий в столбцах;
- переведена скорость из км/ч в м/с.

сохраняем конечный файл как промежуточный результат.

Погода. В начале описания, в качестве еще одного фактора была взята погода.
Данные о погоде за период были получены с сайта:
https://rp5.ru/%D0%9F%D0%BE%D0%B3%D0%BE%D0%B4%D0%B0_%D0%B2_%D0%BC%D0%B8%D1%80%D0%B5 
так как из него данные можно выгрузить в csv формате. Выгружаем данные и начи -
наем их преобразовывать в удобный для нас формат. Создаем DataFrame, делаем 
индексацию, удаляем ненужные столбцы, разделяем на два столбца часы и минуты.
Для чего мы это делаем? В качестве соединительного ключа между двумя файлами  
выступает дата и часы. Сохраняем полученные данные в новый csv файл.

Теперь у нас есть два готовых csv файла DataFrame и мы готовы их соединить при
помощи ключа дата и время. Соединять их будем функцией merge при помощи типа 
слияния left. 
После слияния двух файлов получаем исходный единый DataFrame и сохраняем его как
промежуточный результат.

II. Построение линейной регрессионной модели
Чтобы подготовить данные для построения регрессионной модели необходимо
обнаружить и обработать выбросы. Это делается для того, чтобы модель была
максимально точной, иначе выбросы могут отрицательно повлиять на точность
модели.

При изучении факторных переменных, в стобцах 'dele' и 'speed' потенциально
можно обнаружить выбросы, возникающие в результате неверных данных. Их поиск
будет подкреплен математическими методами и визуализацией.

Итак, для начала открываем готовый файл с данными из первой части.
Идентифицируем выбросы при помощи Identifying Outliers with Interquartile 
Range (IQR) (межквартильный диапазон). Данный метод представлен формулой 
IQR = Q3 - Q1. Межквартильный диапазон показывает, как данные распределяются
относительно медианы. Он менее восприимчив к выбросам, чем диапазон, и поэтому
может быть более полезным. 

Выгружаем полученные результаты IQR, которые будут использованы для обнаружения
выбросов. Значение в колонках 'True' означает наличие выброса.

Еще один из методов обнаружения выбросов - идентификация с ассиметрией. В 
идеале значение ассиметрии должно находиться в диапазоне от -1 до +1, и 
любое значительное отклонение от этого диапазона указывает на наличие экстре -
мальных значений. Для колокни 'speed' значения коэффициента равно -1,5, что 
явно указывает на наличие выбросов. Также выведем статистику функцией describe.

Для наглядного представления, проведем идентификацию выбросов при помощи визуа -
лизации. Первый график это Box Plot, он часто используется для идентификации
распределения данных и обнаружения выбросов. На графике видно присутствие 
большого количества точек, что указывает на наличие выбросов. Второй график - 
это гистограмма. Выброс наблюдается вне общей картины распределения.

После того, как были найдены выбросы и представлены графически, необходимо их
обработать. Будем это делать при помощи метода Quantile-based Flooring and
Capping. после применения данного метода, значение ассиметрии значительно 
улучшилось (-1.14). Применяем все то же самое для стоблца 'dele'.

Теперь после обработки выбросов проведем разведочный анализ -- exploratory 
data analysis, в котором предстоит найти корреляцию между переменными.
Воспользуемся Heat Maps, на графике видно, что скорость больше всего зависит
от пройденной дистанции,(коэффициент -0,94 свидетельствует о сильной корреляции
между скоростью и дистанцией, чем больше курьер прошел км, тем меньше его 
скорость и наоборот), из графика видно, что изменение высот на скорость и 
температура на скорость влияет очень слабо. Построим график Plotting a scatter
plot. На нем изображена зависимость между скоростью курьера и пройденным
расстоянием. Еще один график pair plot показывает аналогичную зависимость.


Построение регрессионной модели
Подгружаем все необходимые библиотеки. Определяем какие значения в колонках 
будут зависимыми и независимыми переменными. В качестве зависимой переменной
выступает скорость, в качестве предикторов обозначены дистанция, температура,
долгота, широта, изменение высоты и время. Далее разделяем набор данных на данные
обучения и тестирования. Это означает, что 20% данных для тестирования будут 
выбраны случайным образом и отделены от обучающихся данных. 

Теперь можем построить модель. После построения модели возникает вопрос, как 
правильно интерпертировать полученный результат? В первую очередь стоит обратить
внимание на колонку с называнием p-value. P-value показывает статистическую зна -
чимость модели. Важно, чтобы коэффициент p-value был меньше чем 0.05, так как чем
меньше значение p-value тем лучше результат. В таблице предиктор температура
больше 0,05 и не щависит от скорости, поэтому отбрасываем его.

В модели R в квадрате равен 90% дисперсии, что действительно очень много.
Теперь построим еще одну модель, но уже без статистически значимого результата
trip_tc. Мы видим, что теперь все предикторы статистически значимы и R в квад -
рате по-прежнему хорош. Построим модельную диаграмму. Фактические и прогнозируемые 
оценки имеют почти идеальную линейность. Итак, подводя итог лучшая модель будет
иметь: p-value<0,05, меньшие ошибки, более высокий скорректированный R в квадра -
те.

Последним шагом будет осмотр ошибок. Ошибки также не значительны. 
Значения метрики малых ошибок указывают на хорошую предсказательную способность,
тогда как большие значения говорят об обратном. 
